packages:
  yum:
    python3.11: []
    python3.11-pip: []

container_commands:
  01_fix_permissions:
    command: "chown -R webapp:webapp /var/app/staging/venv/ && chmod -R 775 /var/app/staging/venv/"
  02_create_venv:
    command: "python3 -m venv /var/app/staging/venv"
    leader_only: true
  03_fix_permissions_again:
    command: "chown -R webapp:webapp /var/app/staging/venv/ && chmod -R 775 /var/app/staging/venv/"
  04_upgrade_pip:
    command: "sudo -u webapp /var/app/staging/venv/bin/pip install --upgrade pip setuptools"
  05_install_requirements:
    command: "sudo -u webapp /var/app/staging/venv/bin/pip install --no-cache-dir -r /var/app/staging/requirements.txt"

option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: application:application
