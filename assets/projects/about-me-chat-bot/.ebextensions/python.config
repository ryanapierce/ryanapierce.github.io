packages:
  yum:
    python3: []
    python3-pip: []

container_commands:
  01_fix_permissions:
    command: "chown -R webapp:webapp /var/app/venv/ && chmod -R 775 /var/app/venv/"
  02_create_venv:
    command: "python3 -m venv /var/app/venv"
    leader_only: true
  03_upgrade_pip:
    command: "sudo -u webapp /var/app/venv/bin/pip install --upgrade pip setuptools"
  04_install_requirements:
    command: "sudo -u webapp /var/app/venv/bin/pip install -r /var/app/staging/requirements.txt"

option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: application:application
